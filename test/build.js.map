{"version":3,"sources":["webpack:///webpack/bootstrap 550d4077feba5a3601d3","webpack:///./test/main.jsx","webpack:///../src/component.jsx","webpack:///../src/observable.jsx","webpack:///../src/middleware.jsx"],"names":[],"mappings":"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","file":"build.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 550d4077feba5a3601d3\n **/","window.assert = function (b) {\r\n  if (!b) console.error(new Error('assert failed'));\r\n}\r\n\r\nimport {elt, Component} from 'elt/component';\r\nimport {Bind} from 'elt/middleware';\r\n\r\nclass MyApp extends Component {\r\n\r\n  initial_data = {\r\n    txt: 'some text.',\r\n    txt2: 'other text...',\r\n    obj: {a: 1, b: 2}\r\n  };\r\n\r\n  props = ['txt'];\r\n\r\n  view(data) {\r\n    console.dir(data.txt2);\r\n    return <div>\r\n      <span class='pouet'>test ! {data.txt} {false} {new Date()}</span><br/>\r\n      <span>{data.obj} <input type='text' name='toto' value={data.txt2}/></span>\r\n    </div>;\r\n  }\r\n}\r\n\r\ndocument.body.appendChild(<MyApp txt='pouet !'/>.$node);\r\n// should append that node to the body.\r\n\r\n// Hello!\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./test/main.jsx\n **/","\r\nimport {Observable, ObservableObject} from 'elt/observable';\r\nimport * as p from 'elt/observable';\r\n\r\nexport class Component {\r\n\r\n  $node = null;\r\n  $content = null;\r\n  $parentComponent = null;\r\n  $middleware = [];\r\n\r\n  // List of properties set in the attributes that will be pulled into\r\n  // data as .props\r\n  props = []\r\n\r\n  // The data spec for this component. Note that it can be overriden\r\n  // (although rarely, usually by Repeat)\r\n  initial_data = {}\r\n\r\n  // Should the view be built whenever a component is instanciated ?\r\n  constructor(attrs = {}) {\r\n    attrs = attrs || {};\r\n\r\n    // Handle middleware.\r\n    if (attrs.$$) {\r\n        this.$middleware = attrs.$$ instanceof Array ? attrs.$$ : [attrs.$$];\r\n        delete attrs.$$;\r\n    }\r\n\r\n    this.attrs = attrs;\r\n\r\n  }\r\n\r\n  compile(additional_data = {}) {\r\n\r\n    let data = Object.assign({}, this.initial_data, additional_data);\r\n    this.data = new ObservableObject(data);\r\n\r\n    let attrs = this.attrs;\r\n\r\n    for (let p of this.props) {\r\n      if (p in attrs) {\r\n        this.data[p] = attrs[p];\r\n      }\r\n    }\r\n\r\n    // FIXME make this.data an observable.\r\n\r\n    // hmm ?? should I call the view() here ?\r\n    // NOTE $content should be set up somewhere.\r\n    this.$view = this.view(this.data);\r\n    this.$view.setParentComponent(this);\r\n    this.$content = this.$node = this.$view.$node;\r\n  }\r\n\r\n  view() {\r\n    return null;\r\n  }\r\n\r\n  setContentInsertion = (component) => {\r\n    return {\r\n      // Bound function because we want to access the this.\r\n      view: (data, next) => {\r\n        let elt = next(data);\r\n        this.$content = elt.$node;\r\n        return elt;\r\n      }\r\n    }\r\n  }\r\n\r\n  setParentComponent(component) {\r\n    this.$parentComponent = component;\r\n  }\r\n\r\n  getParentComponent(cls) {\r\n    let p = this.$parentComponent;\r\n    if (!p) return null;\r\n\r\n    if (p instanceof cls) return p;\r\n    return p.getParentComponent(cls);\r\n  }\r\n\r\n  /**\r\n   *\r\n   * This method is bound to\r\n   * @param  {String|Number|Boolean|Node|Component} child\r\n   *         The child we want to add to the current component.\r\n   */\r\n  appendChild(child) {\r\n    // content is a Node.\r\n    let content = this.$content || this.$node;\r\n\r\n    if (typeof child === 'string' || child instanceof Number || child instanceof Boolean) {\r\n      // Simple text node.\r\n      // Note\r\n      content.appendChild(document.createTextNode(child.toString()));\r\n\r\n    } else if (child instanceof Observable) {\r\n      // A text node that will be bound\r\n      // child = new TextObservable(child);\r\n      let txt = document.createTextNode('null');\r\n      // FIXME should do some stringify.\r\n      child.onchange((val) => {\r\n        if (typeof val === 'object') val = JSON.stringify(val);\r\n        txt.textContent = val.toString();\r\n      });\r\n      content.appendChild(txt);\r\n\r\n    } else if (child instanceof Node) {\r\n      content.appendChild(c);\r\n    } else if (child instanceof Component) {\r\n      // Get its HTML node.\r\n      child.setParentComponent(elt);\r\n      content.appendChild(child.$node);\r\n    } else {\r\n      // When all else fail, then try to at least create a JSON-ificated version of it.\r\n      // FIXME probably not.\r\n      content.appendChild(document.createTextNode(JSON.stringify(child)));\r\n    }\r\n  }\r\n\r\n}\r\n\r\n\r\n/**\r\n *\r\n */\r\nexport class TextObservable extends Component {\r\n\r\n  constructor(obs) {\r\n    super();\r\n    this.$node = document.createTextNode('');\r\n\r\n    // Whenever the observed change, just set its value to its string content.\r\n    // obs.onchange((v) => this.$node.textContent = v.toString());\r\n    // obs.onchange((v) => this.$node.textContent);\r\n  }\r\n\r\n}\r\n\r\n\r\n/**\r\n *\r\n */\r\nexport class HtmlComponent extends Component {\r\n  constructor(elt, attrs = {}) {\r\n    super(attrs);\r\n\r\n    assert('string' === typeof elt);\r\n\r\n    this.elt = elt;\r\n  }\r\n\r\n  /**\r\n   * Create the html node.\r\n   */\r\n  view(data) {\r\n\r\n    let e = document.createElement(this.elt);\r\n\r\n    for (let attribute_name in this.attrs) {\r\n      let att = this.attrs[attribute_name];\r\n\r\n      if (att instanceof Observable) {\r\n        att.onchange((val) => {\r\n          if (typeof val === 'object')\r\n            e.setAttribute(attribute_name, JSON.stringify(val));\r\n          else\r\n            e.setAttribute(attribute_name, val);\r\n        });\r\n      } else {\r\n        e.setAttribute(attribute_name, att);\r\n      }\r\n    }\r\n\r\n    // empty setParentComponent as this one shall never have one.\r\n    return {$node: e, setParentComponent() { }};\r\n  }\r\n\r\n}\r\n\r\n/**\r\n *\r\n * NOTE During the element instanciation, it is expected\r\n * \t\tthat the children are already instanciated components.\r\n *\r\n * @param  {Component|String} elt\r\n *         A Component or the name of the html element to create.\r\n * @param  {Object} attrs\r\n *         The attributes that go onto the node. They can hold Observable\r\n *         objects.\r\n * @param  {Component|Node|Any} ...children\r\n *         List of children to append to this component.\r\n * @return {Component}\r\n *         The resulting instanciated component, with a $node property\r\n *         ready to be inserted into the DOM.\r\n */\r\nexport function elt(elt, attrs, ...children) {\r\n\r\n  // assert(elt instanceof Component || typeof elt === 'string');\r\n\r\n  if ((typeof elt) === 'string') {\r\n    // Create a simple Html node.\r\n    elt = new HtmlComponent(elt, attrs);\r\n\r\n  } else if (elt instanceof Function) {\r\n\r\n    // Create a component, as a constructor was given to us as first argument.\r\n    elt = new elt(attrs, children);\r\n\r\n  }\r\n\r\n  elt.compile();\r\n\r\n  // For each child, construct their node.\r\n  for (let c of children) {\r\n    if (typeof c === 'undefined') continue;\r\n    elt.appendChild(c);\r\n  }\r\n\r\n  // By this point, elt.$node is ready for insertion into the DOM.\r\n  return elt;\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ../src/component.jsx\n **/","\r\nexport class Observable {\r\n\r\n  constructor(value) {\r\n    this._listeners = [];\r\n    this._destroyed = false;\r\n    if (value !== undefined) this.set(value);\r\n  }\r\n\r\n  reset() {\r\n    delete this._value;\r\n  }\r\n\r\n  /**\r\n   * Get the value of the observable.\r\n   */\r\n  get() {\r\n    return this._value;\r\n  }\r\n\r\n  set(value) {\r\n\r\n    // No need to change.\r\n    if (this._value === value) return;\r\n\r\n    this._value = value;\r\n\r\n    // No need to trigger if no one is listening to us.\r\n    if (this._listeners.length === 0) return;\r\n\r\n    for (let l of this._listeners) {\r\n        l(value);\r\n    }\r\n\r\n  }\r\n\r\n  onchange(fn) {\r\n\r\n    // listeners are always given the current value if it is available upon subscribing.\r\n    if (this.hasOwnProperty('_value')) fn(this._value);\r\n\r\n    if (this._destroyed) return;\r\n\r\n    this._listeners.push(fn);\r\n\r\n    return () => {\r\n      let idx = this._listeners.indexOf(fn);\r\n      this._listeners.splice(idx, 1);\r\n    }\r\n  }\r\n\r\n  // This Observable will never update anyone again.\r\n  destroy() {\r\n    this._destroyed = true;\r\n    this._listeners = [];\r\n  }\r\n\r\n}\r\n\r\n\r\nexport class ArrayObservable {\r\n\r\n  length = new Observable();\r\n\r\n  constructor(a) {\r\n    this.length = new Observable(0);\r\n    this.update(a);\r\n  }\r\n\r\n  /**\r\n   * Update this array with another array.\r\n   * Performs optimisation ?\r\n   * @param  {Array} arr The array with the newer values.\r\n   */\r\n  update(arr) {\r\n    assert(a instanceof Array);\r\n\r\n    // the array hasn't changed.\r\n    if (arr === this._value);\r\n\r\n    // empty the array ?\r\n    for (let a of arr) {\r\n\r\n    }\r\n\r\n    // update the length.\r\n    this.length.set(this._value.length);\r\n  }\r\n\r\n  // Get observable on position i\r\n  // or set the object at the given position.\r\n  at(i, v) {\r\n\r\n  }\r\n\r\n  destroy() {\r\n    for (let i of this.items) {\r\n      i.destroy();\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport class ObservableObject {\r\n\r\n  constructor(o) {\r\n    for (let name of Object.getOwnPropertyNames(o)) {\r\n      // For now, we don't check for recursion.\r\n      this[name] = new Observable(o[name]);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Bulk update of a datascope.\r\n   */\r\n  update(o) {\r\n\r\n  }\r\n}\r\n\r\n\r\nexport function o(...args) {\r\n  let l = args.length;\r\n  let fn = args[args.length - 1];\r\n  let deps = [];\r\n\r\n  for (let i = 0; i < l - 2; i++) {\r\n      // compute the dependencies here.\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ../src/observable.jsx\n **/","/**\r\n * Core middleware for el.\r\n */\r\n\r\nexport var Attr = function Attr(obj, cpt) {\r\n\r\n};\r\n\r\nexport var If = function If(obs, cpt) {\r\n\r\n};\r\n\r\n/**\r\n * Decorate the component so that\r\n * @param  {[type]} 2        [description]\r\n * @param  {[type]} function Repeat(obs,   trackBy, repeater [description]\r\n * @return {[type]}          [description]\r\n */\r\nexport var Repeat = function Repeat(obs, trackBy, repeater) {\r\n\r\n};\r\n\r\nexport var On = function On(evt_name, cbk) {\r\n\r\n  return function (component) {\r\n    // Est-ce qu'on peut se unsubscribe ?\r\n    component.$node.addEventListener(evt_name, cbk);\r\n    return node;\r\n  };\r\n\r\n};\r\n\r\nexport class Middleware {\r\n\r\n  $component = null;\r\n\r\n  setComponent(cmp) {\r\n    this.$component = cmp;\r\n  }\r\n\r\n}\r\n\r\nexport class Bind extends Middleware {\r\n\r\n}\r\n\r\n// export function Bind(observable, opts) {\r\n//\r\n//   return function (component) {\r\n//     // FIXME specify a bind interface.\r\n//     if (component.bind) {\r\n//\r\n//     } else {\r\n//       // We're calling bind on a classic HTML node.\r\n//       let node = component.$node;\r\n//\r\n//       if (node.tagName === 'input') {\r\n//\r\n//       } else if (node.tagName === 'textarea') {\r\n//\r\n//       }\r\n//     }\r\n//   };\r\n//\r\n// };\r\n\n\n\n/** WEBPACK FOOTER **\n ** ../src/middleware.jsx\n **/"],"sourceRoot":""}