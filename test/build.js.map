{"version":3,"sources":["webpack:///webpack/bootstrap bc83c2066a0cc455d3cf","webpack:///./test/main.jsx","webpack:///../src/observable.jsx","webpack:///../src/component.jsx","webpack:///../src/middleware.jsx","webpack:///../../src/middleware/bind.jsx","webpack:///../../src/middleware/if.jsx","webpack:///../../src/middleware/repeat.jsx"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;0CCjCgB,CAAgB;;yCACH,CAAe;;0CAClB,CAAgB;;AAN1C,OAAM,CAAC,MAAM,GAAG,UAAU,CAAC,EAAE;AAC3B,OAAI,CAAC,CAAC,EAAE,OAAO,CAAC,KAAK,CAAC,IAAI,KAAK,CAAC,eAAe,CAAC,CAAC,CAAC;EACnD;;KAMK,EAAE;aAAF,EAAE;;YAAF,EAAE;2BAAF,EAAE;;gCAAF,EAAE;;UACN,KAAK,GAAG,CAAC,KAAK,EAAE,MAAM,CAAC;;;gBADnB,EAAE;;YAGF,cAAC,IAAI,EAAE;AACT,WAAI,CAAC,IAAI,CAAC,GAAG,EACX,IAAI,CAAC,GAAG,GAAG,sBAAE,IAAI,CAAC,CAAC;AACrB,WAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,IAAI,MAAM,CAAC;;AAEhC,cAAO;;;SACH;;aAAM,SAAM,OAAO;WAAE,IAAI,CAAC,IAAI,IAAI,MAAM;UAAQ;SAChD;;aAAM,SAAM,QAAQ;WAAE,IAAI,CAAC,GAAG;UAAQ;SACtC,kCAAO,IAAI,EAAE,IAAI,CAAC,IAAK,EAAC,EAAE,EAAE,yBAAK,IAAI,CAAC,GAAG,CAAE,GAAE;QAC1C;MACR;;;UAbG,EAAE;;;KAgBF,KAAK;aAAL,KAAK;;YAAL,KAAK;2BAAL,KAAK;;gCAAL,KAAK;;UAsBT,YAAY,GAAG;AACb,UAAG,EAAE,YAAY;AACjB,WAAI,EAAE,SAAS;AACf,UAAG,EAAE,EAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAC;;AAEjB,UAAG,EAAE,GAAG;AACR,WAAI,EAAE,IAAI;AACV,YAAK,EAAE,KAAK;AACZ,aAAM,EAAE,EAAE;AACV,aAAM,EAAE,CAAC;AACT,WAAI,EAAE,YAAY;AAClB,YAAK,EAAE,SAAS;AAChB,WAAI,EAAE,UAAU;AAChB,WAAI,EAAE,OAAO;AACb,eAAQ,EAAE,IAAI,IAAI;AAClB,qBAAc,EAAE,kBAAkB;AAClC,UAAG,EAAE,cAAc;AACnB,YAAK,EAAE,kBAAkB;AACzB,YAAK,EAAE,SAAS;MACjB;UAED,KAAK,GAAG,CAAC,KAAK,CAAC;;;;;;gBA3CX,KAAK;;;;;YA+CL,cAAC,IAAI,EAAE;AACT,cAAO;;;SACL;;;;UAA0B;SAC1B;;;WACE,uBAAC,EAAE,IAAC,IAAI,EAAC,MAAM,EAAC,GAAG,EAAE,IAAI,CAAC,GAAI,GAAM;WACpC,uBAAC,EAAE,IAAC,IAAI,EAAC,UAAU,EAAC,GAAG,EAAE,IAAI,CAAC,IAAK,GAAM;WACzC,uBAAC,EAAE,IAAC,IAAI,EAAC,UAAU,EAAC,GAAG,EAAE,IAAI,CAAC,IAAK,GAAM;WACzC,uBAAC,EAAE,IAAC,IAAI,EAAC,QAAQ,EAAC,GAAG,EAAE,IAAI,CAAC,MAAO,GAAM;WACzC,uBAAC,EAAE,IAAC,IAAI,EAAC,OAAO,EAAC,GAAG,EAAE,IAAI,CAAC,KAAM,GAAM;WACvC,uBAAC,EAAE,IAAC,IAAI,EAAC,QAAQ,EAAC,GAAG,EAAE,IAAI,CAAC,MAAO,GAAM;WACzC,uBAAC,EAAE,IAAC,IAAI,EAAC,KAAK,EAAC,GAAG,EAAE,IAAI,CAAC,GAAI,GAAM;WACnC;AAAC,eAAE;eAAC,IAAI,EAAC,OAAO,EAAC,GAAG,EAAE,IAAI,CAAC,KAAM;aAC/B;;;eAAO,kCAAO,IAAI,EAAC,OAAO,EAAC,KAAK,EAAC,KAAK,EAAC,EAAE,EAAE,yBAAK,IAAI,CAAC,KAAK,CAAE,GAAE;;cAAW;aACzE;;;eAAO,kCAAO,IAAI,EAAC,OAAO,EAAC,KAAK,EAAC,KAAK,EAAC,EAAE,EAAE,yBAAK,IAAI,CAAC,KAAK,CAAE,GAAE;;cAAW;YACtE;WACL,uBAAC,EAAE,IAAC,IAAI,EAAC,OAAO,EAAC,GAAG,EAAE,IAAI,CAAC,KAAM,GAAM;WACvC,uBAAC,EAAE,IAAC,IAAI,EAAC,OAAO,EAAC,GAAG,EAAE,IAAI,CAAC,GAAI,GAAM;WACrC,uBAAC,EAAE,IAAC,IAAI,EAAC,MAAM,EAAC,GAAG,EAAE,IAAI,CAAC,IAAK,GAAM;WACrC,uBAAC,EAAE,IAAC,IAAI,EAAC,OAAO,EAAC,GAAG,EAAE,IAAI,CAAC,KAAM,GAAM;WACvC,uBAAC,EAAE,IAAC,IAAI,EAAC,MAAM,EAAC,GAAG,EAAE,IAAI,CAAC,IAAK,GAAM;WACrC,uBAAC,EAAE,IAAC,IAAI,EAAC,MAAM,EAAC,GAAG,EAAE,IAAI,CAAC,IAAK,GAAM;WACrC,uBAAC,EAAE,IAAC,IAAI,EAAC,UAAU,EAAC,GAAG,EAAE,IAAI,CAAC,QAAS,GAAM;WAC7C,uBAAC,EAAE,IAAC,IAAI,EAAC,gBAAgB,EAAC,GAAG,EAAE,IAAI,CAAC,cAAe,GAAM;UACtD;SAEL;;;;UAA8B;SAC9B;;aAAM,SAAM,OAAO;WAAE,KAAK;;WAAG,IAAI,IAAI,EAAE;UAAQ;;SAAC;;aAAQ,EAAE,EAAE,0BAAM,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAE;;UAAoB;SAAA,kCAAK;SACjH;;;WAAO,IAAI,CAAC,GAAG;UAAQ;SAAA,kCAAK;SAC5B;;;;WAAQ,IAAI,CAAC,GAAG;;UAAa;SAAA,kCAAK;SAClC;;;;WAAQ,IAAI,CAAC,IAAI;;UAAa;SAAA,kCAAK;QAC/B,CAAC;MACR;;;;;;YAGG,gBAAG;AACL,WAAI,CAAC,IAAI,CAAC,GAAG,GAAG,aAAa,CAAC;MAC/B;;;UAnFG,KAAK;;;AAyFX,wBAAC,KAAK,IAAC,GAAG,EAAC,SAAS,GAAE,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjH5C,KAAI,SAAS,GAAG,MAAM,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC;;KAE7B,UAAU;AAEV,YAFA,UAAU,CAET,KAAK,EAAE;2BAFR,UAAU;;AAGnB,SAAI,CAAC,UAAU,GAAG,EAAE,CAAC;AACrB,SAAI,CAAC,UAAU,GAAG,KAAK,CAAC;AACxB,SAAI,KAAK,KAAK,SAAS,EAAE,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;IAC1C;;AANU,aAAU,WAQrB,KAAK,oBAAG;AACN,YAAO,IAAI,CAAC,MAAM,CAAC;IACpB;;;;;;AAVU,aAAU,WAerB,GAAG,kBAAG;AACJ,YAAO,IAAI,CAAC,MAAM,CAAC;IACpB;;AAjBU,aAAU,WAmBrB,GAAG,gBAAC,KAAK,EAAE;;;AAGT,SAAI,IAAI,CAAC,MAAM,KAAK,KAAK,EAAE,OAAO;;AAElC,SAAI,CAAC,MAAM,GAAG,KAAK,CAAC;;;AAGpB,SAAI,IAAI,CAAC,UAAU,CAAC,MAAM,KAAK,CAAC,EAAE,OAAO;;AAEzC,0BAAc,IAAI,CAAC,UAAU,kHAAE;;;;;;;;;;;;WAAtB,CAAC;;AACN,QAAC,CAAC,KAAK,CAAC,CAAC;MACZ;IAEF;;AAjCU,aAAU,WAmCrB,QAAQ,qBAAC,EAAE,EAAE;;;;AAGX,SAAI,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,EAAE,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;;AAEnD,SAAI,IAAI,CAAC,UAAU,EAAE,OAAO;;AAE5B,SAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;;AAEzB,YAAO,YAAM;AACX,WAAI,GAAG,GAAG,MAAK,UAAU,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;AACtC,aAAK,UAAU,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;MAChC;IACF;;;;AAhDU,aAAU,WAmDrB,OAAO,sBAAG;AACR,SAAI,CAAC,UAAU,GAAG,IAAI,CAAC;AACvB,SAAI,CAAC,UAAU,GAAG,EAAE,CAAC;IACtB;;UAtDU,UAAU;;;;;KA2DV,eAAe;AAIf,YAJA,eAAe,CAId,CAAC,EAAE;2BAJJ,eAAe;;UAE1B,MAAM,GAAG,IAAI,UAAU,EAAE;;AAGvB,SAAI,CAAC,MAAM,GAAG,IAAI,UAAU,CAAC,CAAC,CAAC,CAAC;AAChC,SAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;IAChB;;;;;;;;AAPU,kBAAe,WAc1B,MAAM,mBAAC,GAAG,EAAE;AACV,WAAM,CAAC,CAAC,YAAY,KAAK,CAAC,CAAC;;;AAG3B,SAAI,GAAG,KAAK,IAAI,CAAC,MAAM,EAAC,CAAC;;;AAGzB,2BAAc,GAAG,yHAAE;;;;;;;;;;;;WAAV,EAAC;MAET;;;AAGD,SAAI,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;IACrC;;;;;AA3BU,kBAAe,WA+B1B,EAAE,eAAC,CAAC,EAAE,CAAC,EAAE,EAER;;AAjCU,kBAAe,WAmC1B,OAAO,sBAAG;AACR,2BAAc,IAAI,CAAC,KAAK,yHAAE;;;;;;;;;;;;WAAjB,CAAC;;AACR,QAAC,CAAC,OAAO,EAAE,CAAC;MACb;IACF;;UAvCU,eAAe;;;;;KA2Cf,gBAAgB;AAEhB,YAFA,gBAAgB,CAEf,CAAC,EAAE;2BAFJ,gBAAgB;;AAGzB,2BAAiB,MAAM,CAAC,mBAAmB,CAAC,CAAC,CAAC,yHAAE;;;;;;;;;;;;WAAvC,KAAI;;;AAEX,WAAI,CAAC,MAAM,CAAC,KAAI,EAAE,CAAC,CAAC,KAAI,CAAC,CAAC,CAAC;MAC5B;IACF;;AAPU,mBAAgB,WAS3B,MAAM,mBAAC,IAAI,EAAE,KAAK,EAAE;AAClB,SAAI,CAAC,GAAG,IAAI,UAAU,CAAC,KAAK,CAAC,CAAC;AAC9B,WAAM,CAAC,cAAc,CAAC,IAAI,EAAE,IAAI,EAAE;AAChC,iBAAU,EAAE,IAAI;AAChB,UAAG,EAAE,aAAC,KAAK;gBAAK,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC;QAAA;AAC5B,UAAG,EAAE;gBAAM,CAAC;QAAA;MACb,CAAC;IACH;;;;;;AAhBU,mBAAgB,WAqB3B,GAAG,gBAAC,CAAC,EAAE,EAEN;;UAvBU,gBAAgB;;;;;AA2BtB,UAAS,CAAC,GAAU;qCAAN,IAAI;AAAJ,SAAI;;;AACvB,OAAI,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC;AACpB,OAAI,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;;;AAG/B,OAAI,CAAC,KAAK,CAAC,EAAE;AACX,SAAI,GAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;AAChB,SAAI,GAAC,IAAI,MAAM,CAAC,cAAc,CAAC,GAAC,CAAC,KAAK,SAAS,EAC7C,OAAO,IAAI,gBAAgB,CAAC,GAAC,CAAC,CAAC;AACjC,YAAO,IAAI,UAAU,CAAC,GAAC,CAAC,CAAC;IAC1B;;AAED,OAAI,IAAI,GAAG,EAAE,CAAC;AACd,OAAI,GAAG,GAAG,IAAI,UAAU,EAAE,CAAC;;AAE3B,OAAI,YAAY,GAAG,CAAC,CAAC;;;AAGrB,OAAI,WAAW,GAAG,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,EAAE,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;AACjF,cAAW,CAAC,OAAO,CAAC,UAAC,CAAC,EAAE,CAAC,EAAK;AAC5B,aAAQ,GAAG,KAAK,CAAC;AACjB,SAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;;AAEhB,MAAC,CAAC,QAAQ,CAAC,UAAC,CAAC,EAAK;AAChB,WAAI,CAAC,QAAQ,EAAE,YAAY,IAAI,CAAC,CAAC;AACjC,eAAQ,GAAG,IAAI,CAAC;AAChB,WAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AACZ,WAAI,YAAY,KAAK,CAAC,EAAE,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC;MACvD,CAAC,CAAC;IACJ,CAAC,CAAC;;AAEH,UAAO,GAAG,CAAC;EACZ;;;;;;;;;;;;;;;;;;uCCnK0C,CAAc;;KAE5C,SAAS;;;;AAiBT,YAjBA,SAAS,GAiBI;;;SAAZ,KAAK,yDAAG,EAAE;;2BAjBX,SAAS;;UAEpB,KAAK,GAAG,IAAI;UACZ,WAAW,GAAG,IAAI;UAClB,QAAQ,GAAG,IAAI;UACf,gBAAgB,GAAG,IAAI;UACvB,WAAW,GAAG,EAAE;UAIhB,KAAK,GAAG,EAAE;UAIV,YAAY,GAAG,EAAE;;UA2CjB,mBAAmB,GAAG,UAAC,SAAS,EAAK;AACnC,cAAO;;AAEL,aAAI,EAAE,cAAC,IAAI,EAAE,IAAI,EAAK;AACpB,eAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC;AACrB,iBAAK,QAAQ,GAAG,GAAG,CAAC,KAAK,CAAC;AAC1B,kBAAO,GAAG,CAAC;UACZ;QACF;MACF;;AAhDC,UAAK,GAAG,KAAK,IAAI,EAAE,CAAC;;;AAGpB,SAAI,KAAK,CAAC,EAAE,EAAE;AACV,WAAI,CAAC,WAAW,GAAG,KAAK,CAAC,EAAE,YAAY,KAAK,GAAG,KAAK,CAAC,EAAE,GAAG,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;AACrE,cAAO,KAAK,CAAC,EAAE,CAAC;MACnB;;AAED,SAAI,CAAC,KAAK,GAAG,KAAK,CAAC;IAEpB;;;;;;AA5BU,YAAS,WA8BpB,OAAO,sBAAuB;SAAtB,eAAe,yDAAG,EAAE;;AAE1B,SAAI,IAAI,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,YAAY,EAAE,eAAe,CAAC,CAAC;AACjE,SAAI,CAAC,IAAI,GAAG,iCAAqB,IAAI,CAAC,CAAC;;AAEvC,SAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;;AAEvB,0BAAc,IAAI,CAAC,KAAK,kHAAE;;;;;;;;;;;;WAAjB,CAAC;;AACR,WAAI,CAAC,IAAI,KAAK,EAAE;AACd,aAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;QACzB;MACF;;AAED,SAAI,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAClC,SAAI,CAAC,KAAK,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;AACpC,SAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;;AAE9C,2BAAc,IAAI,CAAC,WAAW,yHAAE;;;;;;;;;;;;WAAvB,CAAC;;AACR,WAAI,GAAG,GAAG,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC;;MAEvB;IACF;;AAnDU,YAAS,WAqDpB,IAAI,mBAAG;AACL,YAAO,IAAI,CAAC;IACb;;AAvDU,YAAS,WAoEpB,kBAAkB,+BAAC,SAAS,EAAE;AAC5B,SAAI,CAAC,gBAAgB,GAAG,SAAS,CAAC;IACnC;;AAtEU,YAAS,WAwEpB,kBAAkB,+BAAC,GAAG,EAAE;AACtB,SAAI,CAAC,GAAG,IAAI,CAAC,gBAAgB,CAAC;AAC9B,SAAI,CAAC,CAAC,EAAE,OAAO,IAAI,CAAC;;AAEpB,SAAI,CAAC,YAAY,GAAG,EAAE,OAAO,CAAC,CAAC;AAC/B,YAAO,CAAC,CAAC,kBAAkB,CAAC,GAAG,CAAC,CAAC;IAClC;;;;;;;;;AA9EU,YAAS,WAsFpB,WAAW,wBAAC,KAAK,EAAE;;AAEjB,SAAI,OAAO,GAAG,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,KAAK,CAAC;;AAE1C,SAAI,OAAO,KAAK,KAAK,QAAQ,IAAI,KAAK,YAAY,MAAM,IAAI,KAAK,YAAY,OAAO,EAAE;;;AAGpF,cAAO,CAAC,WAAW,CAAC,QAAQ,CAAC,cAAc,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;MAEhE,MAAM,IAAI,KAAK,kCAAsB,EAAE;;;;AAGtC,aAAI,GAAG,GAAG,QAAQ,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;;AAE1C,cAAK,CAAC,QAAQ,CAAC,UAAC,GAAG,EAAK;AACtB,eAAI,OAAO,GAAG,KAAK,QAAQ,EAAE,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;AACvD,cAAG,CAAC,WAAW,GAAG,GAAG,CAAC,QAAQ,EAAE,CAAC;UAClC,CAAC,CAAC;AACH,gBAAO,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;;MAE1B,MAAM,IAAI,KAAK,YAAY,IAAI,EAAE;AAChC,cAAO,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;MACxB,MAAM,IAAI,KAAK,YAAY,SAAS,EAAE;;AAErC,YAAK,CAAC,kBAAkB,CAAC,GAAG,CAAC,CAAC;AAC9B,cAAO,CAAC,WAAW,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;MAClC,MAAM;;;AAGL,cAAO,CAAC,WAAW,CAAC,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;MACrE;IACF;;AArHU,YAAS,WAuHpB,OAAO,sBAAG;;;AAGR,SAAI,CAAC,IAAI,CAAC,WAAW,EAAE,MAAM,IAAI,KAAK,CAAC,2BAA2B,CAAC,CAAC;AACpE,SAAI,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AACzC,SAAI,CAAC,WAAW,GAAG,IAAI,CAAC;AACxB,SAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;IACrB;;AA9HU,YAAS,WAgIpB,KAAK,kBAAC,OAAO,EAAE;AACb,SAAI,IAAI,CAAC,WAAW,EAAE;;AAEpB,aAAM,IAAI,KAAK,CAAC,mBAAmB,CAAC,CAAC;MACtC;AACD,SAAI,CAAC,WAAW,GAAG,OAAO,CAAC;AAC3B,YAAO,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IACjC;;UAvIU,SAAS;;;;;KA+IT,cAAc;aAAd,cAAc;;AAEd,YAFA,cAAc,CAEb,GAAG,EAAE;2BAFN,cAAc;;AAGvB,0BAAO,CAAC;AACR,SAAI,CAAC,KAAK,GAAG,QAAQ,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC;;;;;IAK1C;;;;;UATU,cAAc;IAAS,SAAS;;;;KAiBhC,aAAa;aAAb,aAAa;;AACb,YADA,aAAa,CACZ,GAAG,EAAc;SAAZ,KAAK,yDAAG,EAAE;;2BADhB,aAAa;;AAEtB,4BAAM,KAAK,CAAC,CAAC;;AAEb,WAAM,CAAC,QAAQ,KAAK,OAAO,GAAG,CAAC,CAAC;;AAEhC,SAAI,CAAC,GAAG,GAAG,GAAG,CAAC;IAChB;;;;;;;;;;;;;;;;;;;;;;;AAPU,gBAAa,WAYxB,IAAI,iBAAC,IAAI,EAAE;;;AAET,SAAI,CAAC,GAAG,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;;2BAEhC,cAAc;AACrB,WAAI,GAAG,GAAG,OAAK,KAAK,CAAC,cAAc,CAAC,CAAC;;AAErC,WAAI,GAAG,kCAAsB,EAAE;AAC7B,YAAG,CAAC,QAAQ,CAAC,UAAC,GAAG,EAAK;AACpB,eAAI,OAAO,GAAG,KAAK,QAAQ,EACzB,CAAC,CAAC,YAAY,CAAC,cAAc,EAAE,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC,KAEpD,CAAC,CAAC,YAAY,CAAC,cAAc,EAAE,GAAG,CAAC,CAAC;UACvC,CAAC,CAAC;QACJ,MAAM;AACL,UAAC,CAAC,YAAY,CAAC,cAAc,EAAE,GAAG,CAAC,CAAC;QACrC;;;AAZH,UAAK,IAAI,cAAc,IAAI,IAAI,CAAC,KAAK,EAAE;aAA9B,cAAc;MAatB;;;AAGD,YAAO,EAAC,KAAK,EAAE,CAAC,EAAE,kBAAkB,gCAAG,EAAG,EAAC,CAAC;IAC7C;;UAjCU,aAAa;IAAS,SAAS;;;;AAqDrC,UAAS,GAAG,CAAC,GAAG,EAAE,KAAK,EAAe;qCAAV,QAAQ;AAAR,aAAQ;;;;;AAIzC,OAAK,OAAO,GAAG,KAAM,QAAQ,EAAE;;AAE7B,QAAG,GAAG,IAAI,aAAa,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;IAErC,MAAM,IAAI,GAAG,YAAY,QAAQ,EAAE;;;AAGlC,QAAG,GAAG,IAAI,GAAG,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;IAEhC;;AAED,MAAG,CAAC,OAAO,EAAE,CAAC;;;AAGd,yBAAc,QAAQ,yHAAE;;;;;;;;;;;;SAAf,EAAC;;AACR,SAAI,OAAO,EAAC,KAAK,WAAW,EAAE,SAAS;AACvC,QAAG,CAAC,WAAW,CAAC,EAAC,CAAC,CAAC;IACpB;;;AAGD,UAAO,GAAG,CAAC;EACZ;;;;;;;;;;;;;;;;;;;;;;;;;;AC7OM,KAAI,IAAI,GAAG,SAAS,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE,EAEzC,CAAC;;;AAEK,KAAI,EAAE,GAAG,SAAS,EAAE,CAAC,QAAQ,EAAE,GAAG,EAAE;;AAEzC,UAAO,UAAU,SAAS,EAAE;;AAE1B,cAAS,CAAC,KAAK,CAAC,gBAAgB,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;AAChD,YAAO,IAAI,CAAC;IACb,CAAC;EAEH,CAAC;;;;KAEW,UAAU;YAAV,UAAU;2BAAV,UAAU;;UAErB,UAAU,GAAG,IAAI;;;AAFN,aAAU,WAIrB,YAAY,yBAAC,GAAG,EAAE;AAChB,SAAI,CAAC,UAAU,GAAG,GAAG,CAAC;IACvB;;UANU,UAAU;;;;;AAUhB,UAAS,KAAK,CAAC,EAAE,EAAE;;AAExB,UAAO,UAAU,SAAS,EAAE;AAC1B,cAAS,CAAC,KAAK,CAAC,gBAAgB,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;IAC/C;EAEF;;AAED,QAAO,CAAC,IAAI,GAAG,mBAAO,CAAC,CAAmB,CAAC,CAAC;AAC5C,QAAO,CAAC,EAAE,GAAG,mBAAO,CAAC,CAAiB,CAAC,CAAC;AACxC,QAAO,CAAC,MAAM,GAAG,mBAAO,CAAC,CAAqB,CAAC,CAAC;;;;;;;;;;;;;uCCrCvB,CAAe;;AAExC,UAAS,IAAI,CAAC,UAAU,EAAE,IAAI,EAAE;AAC9B,OAAI,CAAC,UAAU,EAAE,OAAO;;AAExB,UAAO,UAAU,SAAS,EAAE;AAC1B,YAAO,IAAI,cAAc,CAAC,SAAS,EAAE,UAAU,EAAE,IAAI,CAAC,CAAC;IACxD,CAAC;EAEH,CAAC;;KAEI,cAAc;aAAd,cAAc;;AAKP,YALP,cAAc,CAKN,SAAS,EAAE,UAAU,EAAE,IAAI,EAAE;2BALrC,cAAc;;AAMhB,2BAAO,CAAC;;UAJV,UAAU,GAAG,IAAI;UACjB,QAAQ,GAAG,IAAI;AAKb,SAAI,CAAC,UAAU,GAAG,SAAS,CAAC;AAC5B,SAAI,CAAC,UAAU,GAAG,UAAU,CAAC;AAC7B,SAAI,CAAC,IAAI,GAAG,IAAI,CAAC;;;AAGjB,SAAI,IAAI,GAAG,SAAS,CAAC,KAAK,CAAC;AAC3B,SAAI,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC;;AAErC,SAAI,GAAG,KAAK,OAAO,EAAE;;AAEnB,WAAI,GAAG,GAAG,SAAN,GAAG,CAAI,GAAG,EAAK;AACjB,aAAI,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC;;AAErB,mBAAU,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QACrB;AACD,WAAI,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,MAAM,CAAC;;AAG7C,eAAQ,IAAI;AACV,cAAK,OAAO,CAAC;AACb,cAAK,OAAO,CAAC;AACb,cAAK,MAAM,CAAC;AACZ,cAAK,UAAU,CAAC;AAChB,cAAK,MAAM,CAAC;AACZ,cAAK,OAAO,CAAC;AACb,cAAK,gBAAgB;AACnB,qBAAU,CAAC,QAAQ,CAAC,UAAC,GAAG;oBAAK,IAAI,CAAC,KAAK,GAAG,GAAG;YAAA,CAAC,CAAC;AAC/C,eAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;AACpC,iBAAM;AACR,cAAK,OAAO;AACV,qBAAU,CAAC,QAAQ,CAAC,UAAC,GAAG;oBAAK,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,KAAK,KAAK,GAAG;YAAA,CAAC,CAAC;AAChE,eAAI,CAAC,gBAAgB,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;AACrC,iBAAM;AACR,cAAK,UAAU;AACb,qBAAU,CAAC,QAAQ,CAAC,UAAC,GAAG;oBAAK,GAAG,GAAG,IAAI,CAAC,OAAO,GAAG,IAAI,GAAG,IAAI,CAAC,OAAO,GAAG,KAAK;YAAA,CAAC,CAAC;AAC/E,eAAI,CAAC,gBAAgB,CAAC,QAAQ,EAAE;oBAAM,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC;YAAA,CAAC,CAAC;AACpE,iBAAM;AACR,cAAK,QAAQ,CAAC;AACd,cAAK,MAAM,CAAC;AACZ,cAAK,UAAU,CAAC;AAChB,cAAK,QAAQ,CAAC;AACd;AACA,qBAAU,CAAC,QAAQ,CAAC,UAAC,GAAG;oBAAK,IAAI,CAAC,KAAK,GAAG,GAAG;YAAA,CAAC,CAAC;AAC/C,eAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;AACpC,eAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;AACpC,eAAI,CAAC,gBAAgB,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;AAAA,QACtC;MAEF,MAAM,IAAI,GAAG,KAAK,UAAU,EAAE,EAE9B,MAAM,IAAI,GAAG,KAAK,QAAQ,EAAE,EAE5B;IAEF;;UA9DG,cAAc;;;AAkEpB,OAAM,CAAC,OAAO,GAAG,IAAI,CAAC;;;;;;;;;uCC7EG,CAAe;;AAExC,UAAS,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE;;AAEpB,UAAO,UAAU,SAAS,EAAE;;IAE3B,CAAC;EAEH,CAAC;;AAEF,OAAM,CAAC,OAAO,GAAG,EAAE,CAAC;;;;;;;;;;;;;sCCVI,CAAc;;uCACb,CAAe;;KAElC,iBAAiB;aAAjB,iBAAiB;;YAAjB,iBAAiB;2BAAjB,iBAAiB;;;;;;;;UAAjB,iBAAiB;;;AAOvB,UAAS,MAAM,CAAC,GAAG,EAAE,IAAI,EAAE,QAAQ,EAAE;;AAEnC,UAAO,UAAS,SAAS,EAAE,EAE1B;EACF,CAAC;;KAGI,gBAAgB;aAAhB,gBAAgB;;YAAhB,gBAAgB;2BAAhB,gBAAgB;;;;;UAAhB,gBAAgB;;;AAItB,OAAM,CAAC,OAAO,GAAG,MAAM,CAAC","file":"build.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap bc83c2066a0cc455d3cf\n **/","\r\nwindow.assert = function (b) {\r\n  if (!b) console.error(new Error('assert failed'));\r\n}\r\n\r\nimport {o} from 'elt/observable';\r\nimport {elt, Component} from 'elt/component';\r\nimport {Bind, Click} from 'elt/middleware';\r\n\r\nclass It extends Component {\r\n  props = ['obs', 'type'];\r\n\r\n  view(data) {\r\n    if (!data.obs)\r\n      data.obs = o(null);\r\n    data.type = data.type || 'text';\r\n\r\n    return <li>\r\n        <span class='title'>{data.type || 'text'}</span>\r\n        <code class='result'>{data.obs}</code>\r\n        <input type={data.type} $$={Bind(data.obs)}/>\r\n      </li>\r\n  }\r\n}\r\n\r\nclass MyApp extends Component {\r\n\r\n  // NOTE Array peut recevoir\r\n  //    - un iterable, auquel cas la génération ne se fait qu'une fois sans observation.\r\n  //      un .map serait mieux si on peut rajouter des arrays dans les children comme des boeufs.\r\n  //    - un observable avec juste une valeur iterable, au quel cas\r\n  //      on tente de faire du tracking à la track-by.\r\n  //    - un array-observable fait pour overrider les push(), length et compagnie, et qui dissuade\r\n  //      d'utiliser l'accesseur [].\r\n  //\r\n  //\r\n  // Quid de get/set des objets pour les rendre observables à la Vue ?\r\n  // Il y a quand même quelque chose d'assez agréable là dedans...\r\n\r\n  // FIXME peut être changer son nom pour quelque chose de moins ambigu.\r\n  //    en tout cas revoir sa fonction ; il n'est pas forcément souhaitable\r\n  //    que data se convertisse en un objet complètement observable.\r\n  //    (peut être faire des observables simples même lorsqu'on file des objets ?)\r\n  //    (et vérifier à l'observation qu'on a un observable et que donc ça ne sert à\r\n  //    rien d'observer l'observable....)\r\n  //\r\n  //    Bref, la façon de passer des datas à un component doit être revue impérativement.\r\n  initial_data = {\r\n    txt: 'some text.',\r\n    pass: 'hunter2',\r\n    obj: {a: 1, b: 2},\r\n    // obs: o({a: 5, b: 6}),\r\n    val: 200,\r\n    bool: true,\r\n    radio: 'one',\r\n    search: '',\r\n    number: 4,\r\n    date: '2015-10-21',\r\n    month: '2015-10',\r\n    week: '2015-W24',\r\n    time: '12:23',\r\n    datetime: new Date, // not working.\r\n    datetime_local: '2015-10-06T12:23',\r\n    tel: '+33652738543',\r\n    email: 'admin@domain.com',\r\n    color: '#f45947'\r\n  };\r\n\r\n  props = ['txt'];\r\n\r\n  // Il faudra probablement rajouter un ', content' en argument et lui donner la liste des children.\r\n  // NOTE : il faudra donc revoir la mécanique d'appendChild et d'insertion des nodes dans le DOM.\r\n  view(data) {\r\n    return <div>\r\n      <h2>HTML5 Input Tests</h2>\r\n      <ul>\r\n        <It type='text' obs={data.txt}></It>\r\n        <It type='password' obs={data.pass}></It>\r\n        <It type='checkbox' obs={data.bool}></It>\r\n        <It type='search' obs={data.search}></It>\r\n        <It type='email' obs={data.email}></It>\r\n        <It type='number' obs={data.number}></It>\r\n        <It type='tel' obs={data.tel}></It>\r\n        <It type='radio' obs={data.radio}>\r\n          <label><input type='radio' value='one' $$={Bind(data.radio)}/>One</label>\r\n          <label><input type='radio' value='two' $$={Bind(data.radio)}/>Two</label>\r\n        </It>\r\n        <It type='color' obs={data.color}></It>\r\n        <It type='range' obs={data.val}></It>\r\n        <It type='date' obs={data.date}></It>\r\n        <It type='month' obs={data.month}></It>\r\n        <It type='week' obs={data.week}></It>\r\n        <It type='time' obs={data.time}></It>\r\n        <It type='datetime' obs={data.datetime}></It>\r\n        <It type='datetime-local' obs={data.datetime_local}></It>\r\n      </ul>\r\n\r\n      <h2>Some Random Listeners</h2>\r\n      <span class='pouet'>{false} {new Date()}</span> <button $$={Click(this.test.bind(this))}>Click me !</button><br/>\r\n      <span>{data.obj}</span><br/>\r\n      <span> {data.txt} !!!!</span><br/>\r\n      <span> {data.bool} !!!!</span><br/>\r\n    </div>;\r\n  }\r\n  // <span><input type='text' name='toto2' $$={Bind(data.obs.a)}/> {data.obs.a} !!!!</span><br/>\r\n\r\n  test() {\r\n    this.data.txt = 'was clicked';\r\n  }\r\n\r\n}\r\n\r\n// FIXME il faut bien revoir le unmount pour que les nodes et attributs qui font des observations\r\n//    les arrêtent. On risque d'avoir pas mal de memory leaks sinon.\r\n<MyApp txt='pouet !'/>.mount(document.body);\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./test/main.jsx\n **/","\r\nlet OBJ_PROTO = Object.getPrototypeOf({});\r\n\r\nexport class Observable {\r\n\r\n  constructor(value) {\r\n    this._listeners = [];\r\n    this._destroyed = false;\r\n    if (value !== undefined) this.set(value);\r\n  }\r\n\r\n  reset() {\r\n    delete this._value;\r\n  }\r\n\r\n  /**\r\n   * Get the value of the observable.\r\n   */\r\n  get() {\r\n    return this._value;\r\n  }\r\n\r\n  set(value) {\r\n\r\n    // No need to change.\r\n    if (this._value === value) return;\r\n\r\n    this._value = value;\r\n\r\n    // No need to trigger if no one is listening to us.\r\n    if (this._listeners.length === 0) return;\r\n\r\n    for (let l of this._listeners) {\r\n        l(value);\r\n    }\r\n\r\n  }\r\n\r\n  onchange(fn) {\r\n\r\n    // listeners are always given the current value if it is available upon subscribing.\r\n    if (this.hasOwnProperty('_value')) fn(this._value);\r\n\r\n    if (this._destroyed) return;\r\n\r\n    this._listeners.push(fn);\r\n\r\n    return () => {\r\n      let idx = this._listeners.indexOf(fn);\r\n      this._listeners.splice(idx, 1);\r\n    }\r\n  }\r\n\r\n  // This Observable will never update anyone again.\r\n  destroy() {\r\n    this._destroyed = true;\r\n    this._listeners = [];\r\n  }\r\n\r\n}\r\n\r\n\r\nexport class ArrayObservable {\r\n\r\n  length = new Observable();\r\n\r\n  constructor(a) {\r\n    this.length = new Observable(0);\r\n    this.update(a);\r\n  }\r\n\r\n  /**\r\n   * Update this array with another array.\r\n   * Performs optimisation ?\r\n   * @param  {Array} arr The array with the newer values.\r\n   */\r\n  update(arr) {\r\n    assert(a instanceof Array);\r\n\r\n    // the array hasn't changed.\r\n    if (arr === this._value);\r\n\r\n    // empty the array ?\r\n    for (let a of arr) {\r\n\r\n    }\r\n\r\n    // update the length.\r\n    this.length.set(this._value.length);\r\n  }\r\n\r\n  // Get observable on position i\r\n  // or set the object at the given position.\r\n  at(i, v) {\r\n\r\n  }\r\n\r\n  destroy() {\r\n    for (let i of this.items) {\r\n      i.destroy();\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport class ObservableObject {\r\n\r\n  constructor(o) {\r\n    for (let name of Object.getOwnPropertyNames(o)) {\r\n      // For now, we don't check for recursion.\r\n      this.define(name, o[name]);\r\n    }\r\n  }\r\n\r\n  define(name, value) {\r\n    let o = new Observable(value);\r\n    Object.defineProperty(this, name, {\r\n      enumerable: true,\r\n      set: (value) => o.set(value),\r\n      get: () => o\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Bulk update of a datascope.\r\n   */\r\n  set(o) {\r\n\r\n  }\r\n}\r\n\r\n\r\nexport function o(...args) {\r\n  let l = args.length;\r\n  let fn = args[args.length - 1];\r\n\r\n  // Just creating an observable.\r\n  if (l === 1) {\r\n    let a = args[0];\r\n    if (a && Object.getPrototypeOf(a) === OBJ_PROTO)\r\n      return new ObservableObject(a);\r\n    return new Observable(a);\r\n  }\r\n\r\n  let deps = [];\r\n  let res = new Observable();\r\n\r\n  let not_resolved = 0;\r\n\r\n  // We only get the observable objects.\r\n  let observables = Array.prototype.slice.call(arguments, 0, arguments.length - 2);\r\n  observables.forEach((o, i) => {\r\n    resolved = false;\r\n    deps.push(null);\r\n\r\n    o.onchange((v) => {\r\n      if (!resolved) not_resolved -= 1;\r\n      resolved = true;\r\n      deps[i] = v;\r\n      if (not_resolved === 0) res.set(fn.apply(null, deps));\r\n    });\r\n  });\r\n\r\n  return res;\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ../src/observable.jsx\n **/","\r\nimport {Observable, ObservableObject} from './observable';\r\n\r\nexport class Component {\r\n\r\n  $node = null;\r\n  $parentNode = null;\r\n  $content = null;\r\n  $parentComponent = null;\r\n  $middleware = [];\r\n\r\n  // List of properties set in the attributes that will be pulled into\r\n  // data as .props\r\n  props = []\r\n\r\n  // The data spec for this component. Note that it can be overriden\r\n  // (although rarely, usually by Repeat)\r\n  initial_data = {}\r\n\r\n  // Should the view be built whenever a component is instanciated ?\r\n  constructor(attrs = {}) {\r\n    attrs = attrs || {};\r\n\r\n    // Handle middleware.\r\n    if (attrs.$$) {\r\n        this.$middleware = attrs.$$ instanceof Array ? attrs.$$ : [attrs.$$];\r\n        delete attrs.$$;\r\n    }\r\n\r\n    this.attrs = attrs;\r\n\r\n  }\r\n\r\n  compile(additional_data = {}) {\r\n\r\n    let data = Object.assign({}, this.initial_data, additional_data);\r\n    this.data = new ObservableObject(data);\r\n\r\n    let attrs = this.attrs;\r\n\r\n    for (let p of this.props) {\r\n      if (p in attrs) {\r\n        this.data[p] = attrs[p];\r\n      }\r\n    }\r\n\r\n    this.$view = this.view(this.data);\r\n    this.$view.setParentComponent(this);\r\n    this.$content = this.$node = this.$view.$node;\r\n\r\n    for (let m of this.$middleware) {\r\n      let res = new m(this);\r\n      // should store them...\r\n    }\r\n  }\r\n\r\n  view() {\r\n    return null;\r\n  }\r\n\r\n  setContentInsertion = (component) => {\r\n    return {\r\n      // Bound function because we want to access the this.\r\n      view: (data, next) => {\r\n        let elt = next(data);\r\n        this.$content = elt.$node;\r\n        return elt;\r\n      }\r\n    }\r\n  }\r\n\r\n  setParentComponent(component) {\r\n    this.$parentComponent = component;\r\n  }\r\n\r\n  getParentComponent(cls) {\r\n    let p = this.$parentComponent;\r\n    if (!p) return null;\r\n\r\n    if (p instanceof cls) return p;\r\n    return p.getParentComponent(cls);\r\n  }\r\n\r\n  /**\r\n   *\r\n   * This method is bound to\r\n   * @param  {String|Number|Boolean|Node|Component} child\r\n   *         The child we want to add to the current component.\r\n   */\r\n  appendChild(child) {\r\n    // content is a Node.\r\n    let content = this.$content || this.$node;\r\n\r\n    if (typeof child === 'string' || child instanceof Number || child instanceof Boolean) {\r\n      // Simple text node.\r\n      // Note\r\n      content.appendChild(document.createTextNode(child.toString()));\r\n\r\n    } else if (child instanceof Observable) {\r\n      // A text node that will be bound\r\n      // child = new TextObservable(child);\r\n      let txt = document.createTextNode('null');\r\n      // FIXME should do some stringify.\r\n      child.onchange((val) => {\r\n        if (typeof val === 'object') val = JSON.stringify(val);\r\n        txt.textContent = val.toString();\r\n      });\r\n      content.appendChild(txt);\r\n\r\n    } else if (child instanceof Node) {\r\n      content.appendChild(c);\r\n    } else if (child instanceof Component) {\r\n      // Get its HTML node.\r\n      child.setParentComponent(elt);\r\n      content.appendChild(child.$node);\r\n    } else {\r\n      // When all else fail, then try to at least create a JSON-ificated version of it.\r\n      // FIXME probably not.\r\n      content.appendChild(document.createTextNode(JSON.stringify(child)));\r\n    }\r\n  }\r\n\r\n  unmount() {\r\n    // remove from the parent DOM node if it is mounted\r\n    // destroy the data, observables and such.\r\n    if (!this.$parentNode) throw new Error('this node was not mounted');\r\n    this.$parentNode.removeChild(this.$node);\r\n    this.$parentNode = null;\r\n    this.data.destroy();\r\n  }\r\n\r\n  mount(domnode) {\r\n    if (this.$parentNode) {\r\n      // maybe we could just let the node be mounted elsewhere ?\r\n      throw new Error('already mounted !');\r\n    }\r\n    this.$parentNode = domnode;\r\n    domnode.appendChild(this.$node);\r\n  }\r\n\r\n}\r\n\r\n\r\n/**\r\n *\r\n */\r\nexport class TextObservable extends Component {\r\n\r\n  constructor(obs) {\r\n    super();\r\n    this.$node = document.createTextNode('');\r\n\r\n    // Whenever the observed change, just set its value to its string content.\r\n    // obs.onchange((v) => this.$node.textContent = v.toString());\r\n    // obs.onchange((v) => this.$node.textContent);\r\n  }\r\n\r\n}\r\n\r\n\r\n/**\r\n *\r\n */\r\nexport class HtmlComponent extends Component {\r\n  constructor(elt, attrs = {}) {\r\n    super(attrs);\r\n\r\n    assert('string' === typeof elt);\r\n\r\n    this.elt = elt;\r\n  }\r\n\r\n  /**\r\n   * Create the html node.\r\n   */\r\n  view(data) {\r\n\r\n    let e = document.createElement(this.elt);\r\n\r\n    for (let attribute_name in this.attrs) {\r\n      let att = this.attrs[attribute_name];\r\n\r\n      if (att instanceof Observable) {\r\n        att.onchange((val) => {\r\n          if (typeof val === 'object')\r\n            e.setAttribute(attribute_name, JSON.stringify(val));\r\n          else\r\n            e.setAttribute(attribute_name, val);\r\n        });\r\n      } else {\r\n        e.setAttribute(attribute_name, att);\r\n      }\r\n    }\r\n\r\n    // empty setParentComponent as this one shall never have one.\r\n    return {$node: e, setParentComponent() { }};\r\n  }\r\n\r\n}\r\n\r\n/**\r\n *\r\n * NOTE During the element instanciation, it is expected\r\n * \t\tthat the children are already instanciated components.\r\n *\r\n * @param  {Component|String} elt\r\n *         A Component or the name of the html element to create.\r\n * @param  {Object} attrs\r\n *         The attributes that go onto the node. They can hold Observable\r\n *         objects.\r\n * @param  {Component|Node|Any} ...children\r\n *         List of children to append to this component.\r\n * @return {Component}\r\n *         The resulting instanciated component, with a $node property\r\n *         ready to be inserted into the DOM.\r\n */\r\nexport function elt(elt, attrs, ...children) {\r\n\r\n  // assert(elt instanceof Component || typeof elt === 'string');\r\n\r\n  if ((typeof elt) === 'string') {\r\n    // Create a simple Html node.\r\n    elt = new HtmlComponent(elt, attrs);\r\n\r\n  } else if (elt instanceof Function) {\r\n\r\n    // Create a component, as a constructor was given to us as first argument.\r\n    elt = new elt(attrs, children);\r\n\r\n  }\r\n\r\n  elt.compile();\r\n\r\n  // For each child, construct their node.\r\n  for (let c of children) {\r\n    if (typeof c === 'undefined') continue;\r\n    elt.appendChild(c);\r\n  }\r\n\r\n  // By this point, elt.$node is ready for insertion into the DOM.\r\n  return elt;\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ../src/component.jsx\n **/","/**\r\n * Core middleware for el.\r\n */\r\n\r\nexport var Attr = function Attr(obj, cpt) {\r\n\r\n};\r\n\r\nexport var On = function On(evt_name, cbk) {\r\n\r\n  return function (component) {\r\n    // Est-ce qu'on peut se unsubscribe ?\r\n    component.$node.addEventListener(evt_name, cbk);\r\n    return node;\r\n  };\r\n\r\n};\r\n\r\nexport class Middleware {\r\n\r\n  $component = null;\r\n\r\n  setComponent(cmp) {\r\n    this.$component = cmp;\r\n  }\r\n\r\n}\r\n\r\nexport function Click(fn) {\r\n\r\n  return function (component) {\r\n    component.$node.addEventListener('click', fn);\r\n  }\r\n\r\n}\r\n\r\nexports.Bind = require('./middleware/bind');\r\nexports.If = require('./middleware/if');\r\nexports.Repeat = require('./middleware/repeat');\r\n\n\n\n/** WEBPACK FOOTER **\n ** ../src/middleware.jsx\n **/","\r\nimport {Middleware} from '../middleware';\r\n\r\nfunction Bind(observable, opts) {\r\n  if (!observable) return;\r\n\r\n  return function (component) {\r\n    return new BindMiddleware(component, observable, opts);\r\n  };\r\n\r\n};\r\n\r\nclass BindMiddleware extends Middleware {\r\n\r\n  $component = null;\r\n  $creator = Bind;\r\n\r\n  constructor(component, observable, opts) {\r\n    super();\r\n\r\n    this.$component = component;\r\n    this.observable = observable;\r\n    this.opts = opts;\r\n\r\n    // We're calling bind on a classic HTML node.\r\n    let node = component.$node;\r\n    let tag = node.tagName.toLowerCase();\r\n\r\n    if (tag === 'input') {\r\n\r\n      let cbk = (evt) => {\r\n        let val = node.value;\r\n        // console.log(val);\r\n        observable.set(val);\r\n      }\r\n      let type = node.type.toLowerCase() || 'text';\r\n\r\n\r\n      switch (type) {\r\n        case 'color':\r\n        case 'range':\r\n        case 'date':\r\n        case 'datetime':\r\n        case 'week':\r\n        case 'month':\r\n        case 'datetime-local':\r\n          observable.onchange((val) => node.value = val);\r\n          node.addEventListener('input', cbk);\r\n          break;\r\n        case 'radio':\r\n          observable.onchange((val) => node.checked = node.value === val);\r\n          node.addEventListener('change', cbk);\r\n          break;\r\n        case 'checkbox':\r\n          observable.onchange((val) => val ? node.checked = true : node.checked = false);\r\n          node.addEventListener('change', () => observable.set(node.checked));\r\n          break;\r\n        case 'number':\r\n        case 'text':\r\n        case 'password':\r\n        case 'search':\r\n        default:\r\n        observable.onchange((val) => node.value = val);\r\n        node.addEventListener('keyup', cbk);\r\n        node.addEventListener('input', cbk);\r\n        node.addEventListener('change', cbk);\r\n      }\r\n\r\n    } else if (tag === 'textarea') {\r\n\r\n    } else if (tag === 'select') {\r\n\r\n    }\r\n\r\n  }\r\n\r\n}\r\n\r\nmodule.exports = Bind;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ../../src/middleware/bind.jsx\n **/","\r\nimport {Middleware} from '../middleware';\r\n\r\nfunction If(obs, cpt) {\r\n\r\n  return function (component) {\r\n    // ...\r\n  };\r\n\r\n};\r\n\r\nmodule.exports = If;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ../../src/middleware/if.jsx\n **/","\r\nimport {Component} from '../component';\r\nimport {Middleware} from '../middleware';\r\n\r\nclass RepeaterComponent extends Component {\r\n\r\n}\r\n\r\n/**\r\n * Decorate the component so that\r\n */\r\nfunction Repeat(obs, opts, repeater) {\r\n\r\n  return function(component) {\r\n\r\n  }\r\n};\r\n\r\n\r\nclass RepeatMiddleware extends Middleware {\r\n\r\n}\r\n\r\nmodule.exports = Repeat;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ../../src/middleware/repeat.jsx\n **/"],"sourceRoot":""}